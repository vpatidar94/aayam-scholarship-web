<div class="">
  <div class="row">
    <div class="col col-12">
      <div class="pb-4">
        <ng-container *ngIf="loading; else ifNoData">
          <ng-container *ngTemplateOutlet="spinner"></ng-container>
        </ng-container>
        <ng-template #ifNoData>
          <ng-container *ngIf="data.length === 0; else showTableList">
            <div class="p-4 text-center">
              <h5>No data present.</h5>
            </div>
          </ng-container>
          <ng-template #showTableList>
            <org-ay-data-table [list]="data" [tableHeader]="thead" (updateData)="changeData($event)"
              [searchFilterKeys]="searchFilterKeys" [searchPlaceHolder]="searchPlaceHolder">
              <tr *ngFor="let userItem of filteredData; let i = index" tBody>
                <td>{{ calculateStartIndex(i)}}</td>
                <td>{{userItem.firstName}} {{userItem.lastName}}</td>
                <td>{{userItem.mobileNo}}</td>
                <td>{{userItem.gender}}</td>
                <td>{{userItem.stream}}</td>
                <td>{{userItem.prevClass}}</td>
                <td>{{userItem.howDoYouComeToKnow}}</td>
                <td>{{userItem.counsellor}}</td>
                <td>{{userItem.attender}}</td>
                <td>{{userItem.admissionStatus}}</td>
                <td>{{userItem.createdAt | date : "MMM d, y, h:mm a"}}</td>
                <td>{{userItem.updatedAt | date : "MMM d, y, h:mm a"}}</td>
                <td> <button class="btn btn-secondary" (click)="openModel(userItem)">Edit</button></td>
              </tr>
            </org-ay-data-table>
          </ng-template>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<ng-template #spinner>
  <div class="d-flex justify-content-center py-4">
    <span class="spinner-border spinner-border-lg" role="status" aria-hidden="true"></span>
  </div>
</ng-template>

<div class="modal" id="enquiryModal">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{userData.firstName}} {{userData.lastName}}</h4>
        <button type="button" class="btn-close" (click)="CloseModel()" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form class="row g-3" [formGroup]="tForm" (ngSubmit)="onSubmit()">
          <div class="col-12 col-md-3  mb-1">
            <label for="counsellor" class="mb-2 text__body-dark">Counsellor</label>
            <div class="me-4">
              <select class="form-select" name="counsellor" formControlName="counsellor" (change)="changeCounsellor()">
                <option *ngFor="let option of counsellorOptions" [value]="option">{{ option }}
                </option>
              </select>
            </div>
            <org-field-validation-message [control]="tForm.controls['counsellor']"></org-field-validation-message>
          </div>
          <div class="col-12 col-md-3 mb-1">
            <label for="attender" class="mb-2 text__body-dark">Excecutive</label>
            <div class="me-4">
              <select class="form-select" name="attender" formControlName="attender" (change)="changeAttender()">
                <option *ngFor="let option of attenderOptions" [value]="option">{{ option }}
                </option>
              </select>
            </div>
            <org-field-validation-message [control]="tForm.controls['attender']"></org-field-validation-message>
          </div>
          <div class="col-12 col-md-3 mb-1">
            <label for="status" class="mb-2 text__body-dark">Admission Status</label>
            <div class="me-4">
              <select class="form-select" name="status" formControlName="status" (change)="changeAdmissionStatus()">
                <option *ngFor="let option of statusOptions" [value]="option">{{ option }}
                </option>
              </select>
            </div>
            <org-field-validation-message [control]="tForm.controls['status']"></org-field-validation-message>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="saveChanges()" data-bs-dismiss="modal">Save
          Changes</button>
        <button type="button" class="btn btn-danger" (click)="CloseModel()" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>